#include <stdio.h>

int main() {
    const char *chars = " .:-=+*#%@";
    int width = 80, height = 40;
    int max_iter = 50;

    for (int y = 0; y < height; y++) {
        for (int x = 0; x < width; x++) {
            // Map pixel to complex plane
            double cr = -2.0 + 3.0 * x / width;
            double ci = -1.0 + 2.0 * y / height;

            double zr = 0.0, zi = 0.0;
            int i = 0;

            while (zr*zr + zi*zi <= 4.0 && i < max_iter) {
                double tmp = zr*zr - zi*zi + cr;
                zi = 2.0 * zr * zi + ci;
                zr = tmp;
                i++;
            }

            // Pick a character based on iteration count
            putchar(chars[i * 9 / max_iter]);
        }
        putchar('\n');
    }

    return 0;
}
